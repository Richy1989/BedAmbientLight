<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Ambient Bed Light</title>
</head>
<body>
    <h1>Ambient Bed Light</h1>
    <div class="control-button-main">
        <div class="button-container">
            <button class="control-button" onclick="controlLED('left')">Left Side</button>
            <button class="control-button" onclick="controlLED('right')">Right Side</button>
        </div>
        <div class="button-container">
            <button class="control-button full-width" onclick="controlLED('bothDefault')">Turn On Both Sides - Default</button>
        </div>
        <div class="button-container">
            <button class="control-button full-width" onclick="controlLED('bothRandom')">Turn On Both Sides - Random</button>
        </div>
    </div>
        <form method='POST' action='save_wifi'>
            <fieldset>
                <legend>Wireless configuration</legend>
                Ssid:
                <br>
                <select name="ssid">
                    {ssid}
                </select>
                <br>
                Password:
                <br>
                <div class="password-div-container">
                    <div class="box">
                        <input type="password" id="ssidPassword" name="password" placeholder="Password">
                        <div class="showpassword_box"><input type="checkbox" id="toggleSSIDPassword"><p>Show</p></div>
                    </div>
                </div>
                <br>
                <input type="submit" value="Save WiFi Settings">
            </fieldset>
        </form>

        <form method='POST' action='led_settings'>
            <fieldset>
                <legend>LED / Color Setting</legend>
                <label for="colorpicker">Color Picker:</label>
                <input id="color_selector" name="color_selector" type="color" value="{default_color}">
                <br>
                Led Count:
                <br>
                <input type="text" name="ledCount" value="{ledCount}">
                <br>
                <br>
                <input type="submit" value="Save LED Settings">
            </fieldset>
        </form>

        <form method='POST' action='save_mqtt'>
            <fieldset>
                <legend>MQTT Configuration</legend>
                Server:
                <br>
                <input type="text" name="mqttServer" value="{mqttServer}">
                <br>
                Port:
                <br>
                <input type="text" name="mqttPort" value="{mqttPort}">
                <br>
                Username:
                <br>
                <input type="text" name="mqttUsername" value="{mqttUsername}">
                <br>
                Password:
                <br>
                <div class="password-div-container">
                    <div class="box">
                        <input type="password" id="mqttPassword" name="mqttPassword" placeholder="Password" value="{mqttPassword}">
                        <div class="showpassword_box"><input type="checkbox" id="toggleMQTTPassword"><p>Show</p></div>
                    </div>
                </div>
                <br>
                <input type="submit" value="Save MQTT Settings">
            </fieldset>
        </form>
        <div class="center-message">
            <b>{message}</b>
        </div>

        <script>
            document.getElementById('toggleMQTTPassword').addEventListener('change', function () {
                var passwordField = document.getElementById('mqttPassword');
                if (this.checked) {
                    passwordField.type = 'text';
                } else {
                    passwordField.type = 'password';
                }
            });

            document.getElementById('toggleSSIDPassword').addEventListener('change', function () {
                var passwordField = document.getElementById('ssidPassword');
                if (this.checked) {
                    passwordField.type = 'text';
                } else {
                    passwordField.type = 'password';
                }
            });

            function controlLED(side) {
                fetch('/controlbutton_pressed', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ Side: side })
                });
            }
        </script>
</body>
</html>
